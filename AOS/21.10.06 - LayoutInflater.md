# Inflation

ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™”ë©´ì„ ì •ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” .xml íŒŒì¼ì„ ì •ì˜í•´ì•¼í•œë‹¤. ì´í›„ ì •ì˜í•œ .xmlíŒŒì¼ê³¼ ì—°ê²°ë˜ëŠ” ì•¡í‹°ë¹„í‹° í´ë˜ìŠ¤ë„ ì •ì˜í•´ì•¼í•œë‹¤.
```kotlin
private val button : Button by lazy {
	findViewById(R.id.exampleButton)
}
```
ë³´í†µ ì´ëŸ°ì‹ìœ¼ë¡œ í•´ë‹¹ ë ˆì´ì•„ì›ƒê³¼ ì—°ê²°í•´ì£¼ëŠ”ë° ì´ ë•Œ ë ˆì´ì•„ì›ƒì˜ ë‚´ìš©ì´ ë©”ëª¨ë¦¬ì— ê°ì²´í™”ë˜ëŠ” ê³¼ì •ì„ `ì¸í”Œë ˆì´ì…˜(Inflation)` ì´ë¼ê³  í•œë‹¤. 

ë ˆì´ì•„ì›ƒì€ ì•±ì´ ì‹¤í–‰ë˜ëŠ” ì‹œì ì— ë©”ëª¨ë¦¬ì— ê°ì²´í™”ê°€ ëœë‹¤. ì¦‰, .xml íŒŒì¼ì— `Button` ì„ ì •ì˜í•´ë„ ì•±ì€ ìê¸°ê°€ ì‹¤í–‰ë˜ê¸° ì „ê¹Œì§€ ë²„íŠ¼ì´ ìˆëŠ”ì§€ ëª¨ë¥¸ë‹¤. **ë‹¤ì‹œ ë§í•´ì„œ `setContentView(R.layout.activity_main)` ì´ í˜¸ì¶œë˜ê¸° ì „ê¹Œì§€ëŠ” ë²„íŠ¼ì´ ìˆëŠ”ì§€ ëª¨ë¥¸ë‹¤ëŠ” ë§ì´ë‹¤.** 

ì‹¤ì œ ì½”ë“œë¡œ ì‘ì„±í•´ì„œ ì‹¤í–‰ì‹œì¼œë³´ì.
```kotlin
package com.example.event

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.util.Log
import android.view.GestureDetector
import android.view.KeyEvent
import android.view.MotionEvent
import android.view.View
import android.widget.Button
import android.widget.Toast
import androidx.core.view.GestureDetectorCompat

class MainActivity : AppCompatActivity() {
    private val button : Button by lazy {
        findViewById(R.id.exampleButton)
    }
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        bind()
        setContentView(R.layout.activity_main)
    }

    private fun bind() {
        button.setOnClickListener {
            Toast.makeText(applicationContext, "ë²„íŠ¼ ëˆŒë¦¼", Toast.LENGTH_LONG).show()
        }
    }
}
```

ì•±ì„ ì‹¤í–‰ì‹œì¼œë³´ë©´ ë°”ë¡œ ì£½ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. 

![](https://images.velog.io/images/k906506/post/39fff6e6-a586-4f03-a35b-deed1a00367a/Screenshot_1633483254.png)

ì™œ ê·¸ëŸ´ê¹Œ? ê·¸ ì´ìœ ëŠ” ë©”ëª¨ë¦¬ì— ê°ì²´í™”ë˜ì§€ ì•Šì€ ë ˆì´ì•„ì›ƒì„ ì°¸ì¡°í•˜ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì´ë‹¤. 

![](https://images.velog.io/images/k906506/post/e1112747-c73a-411d-8394-d05704e789c0/image.png)

ì‹¤ì œë¡œ ì˜¤ë¥˜ ëª©ë¡ì„ ë³´ë©´ `NullPointException` ì´ ë°œìƒí•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

> setContentView()ê°€ ì¤‘ìš”í•œ ê±´ ì•Œê² ëŠ”ë° ì •í™•í•˜ê²Œ ë­˜ í•˜ëŠ” ë©”ì†Œë“œì¸ê°€ìš”? ğŸ˜

setContentView()ëŠ” í™”ë©´ì— í‘œì‹œí•  ë ˆì´ì•„ì›ƒì´ë‚˜ ë·° ê°ì²´ë¥¼ ì§€ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ìœ„ì˜ ì½”ë“œì—ì„œë„ `activity_main`ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ ë ˆì´ì•„ì›ƒì— ë“¤ì–´ìˆëŠ” ë·°(Button)ì´ ë©”ëª¨ë¦¬ì— ê°ì²´í™” ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ê·¸ë ‡ë‹¤ë©´ í™”ë©´ ì „ì²´ì— ë³´ì—¬ì£¼ëŠ” ë ˆì´ì•„ì›ƒì´ ì•„ë‹ˆë¼ **ì¼ë¶€ë¶„, ë¶€ë¶„ ë ˆì´ì•„ì›ƒë„ setContentView()ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆì„ê¹Œ?** ì•„ì‰½ê²Œë„ í•  ìˆ˜ ì—†ë‹¤. **setContentView()ëŠ” ì•¡í‹°ë¹„í‹°ì˜ í™”ë©´ ì „ì²´(ë©”ì¸ ë ˆì´ì•„ì›ƒ)ì„ ì„¤ì •í•˜ëŠ” ì—­í• ë§Œì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤.**

> ê·¸ëŸ¼ ë¶€ë¶„ í™”ë©´ì€ ì–´ë–»ê²Œ ê°ì²´í™”í•´ìš”...? ğŸ˜¡

ì´ ë•Œ `LayoutInflater`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. LayoutInflaterë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì€ ì´ 3ê°€ì§€ê°€ ìˆë‹¤. ~~(ì˜¤ëŠ˜ ì•„ì¹¨ë¶€í„° ì‚½ì§ˆ ê°œë§ì´ í•¨...)~~
- getSystemService()
- getLayoutInflater()
- LayoutInflater.from()

### getSystemService()
ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ìœ¼ë¡œ `context` ì—ì„œ `LayoutInflater`ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì´ë‹¤.

### getLayoutInflater()
`LayoutInflater` ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì´ë‹¤. ìì‹  windowì˜ `LayoutInflater` ë¥¼ ì‚¬ìš©í•œë‹¤.

### LayoutInflater.from()
ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ `LayoutInflater`ì— `static` ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆëŠ” `LayoutInflater.from` ì„ í†µí•´ ê°ì²´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì´ë‹¤. ê°™ì€ `context` ì—ì„œëŠ” ê°™ì€ ê°ì²´ë¥¼ ë¦¬í„´í•˜ê¸° ë•Œë¬¸ì— êµ³ì´ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ë†“ì§€ ì•Šì•„ë„ ëœë‹¤.

# View Inflateí•˜ê¸°
inflationì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ì„ ì–¸í•œ LayoutInflationì˜ `inflater` ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

```kotlin
inflate(resource : Int, root : ViewGroup?, attachToRoot : Boolean)
```

- resourse : Viewë¥¼ ë§Œë“¤ê³  ì‹¶ì€ ë ˆì´ì•„ì›ƒ íŒŒì¼ì˜ id -> R.id.~~~ ë¥¼ ë„˜ê²¨ì¤€ë‹¤.
- root : ìƒì„±ë  Viewì˜ parent. ì¦‰, ìƒì„±ë  ê³µê°„ì˜ layout ê°ì²´ë¥¼ ë„˜ê²¨ì¤€ë‹¤.
- attachToRoot : trueë¡œ ì„¤ì •í•  ê²½ìš° rootì˜ ìì‹ viewë¡œ ìë™ìœ¼ë¡œ ì¶”ê°€ëœë‹¤.

ì‹¤ì œ ì½”ë“œë¡œ ì‚´í´ë³´ì.

`activity_main`ì€ `FrameLayout`ê³¼ `Button`ì„ ê°€ì§„ë‹¤. ë²„íŠ¼ì´ í´ë¦­ë˜ë©´ FrameLayoutì— TextViewë¥¼ ë„£ì–´ì¤„ ê³„íšì´ë‹¤.

```kotlin
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <FrameLayout
        android:id="@+id/frame"
        android:layout_width="300dp"
        android:layout_height="300dp">
    </FrameLayout>

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
         android:layout_height="wrap_content"/>

</LinearLayout>
```

ì´ê±´ FrameLayoutì— ë„£ì–´ì¤„ TextView
```kotlin
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/textView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:text="ì•ˆë…•í•˜ì„¸ìš”"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

`main_activity` ëŠ” ìœ„ì—ì„œ ë§í•œ 3ê°€ì§€ ë°©ë²•ì„ ëª¨ë‘ ì‚¬ìš©í•´ë´¤ë‹¤.

```kotlin
package com.example.example
import android.content.Context
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.view.LayoutInflater
import android.widget.Button
import android.widget.FrameLayout

class MainActivity : AppCompatActivity() {
    private val frame: FrameLayout by lazy {
        findViewById(R.id.frame)
    }

    private val button: Button by lazy {
        findViewById(R.id.button)
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        bind()
    }

    private fun bind() {
        val inflater1: LayoutInflater =
            getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater
        val inflater2: LayoutInflater = LayoutInflater.from(applicationContext)
        val inflater3: LayoutInflater = layoutInflater
        button.setOnClickListener {
            inflater1.inflate(R.layout.sub1, frame, true)
            inflater2.inflate(R.layout.sub1, frame, true)
            inflater3.inflate(R.layout.sub1, frame, true)
        }
    }
}
```
`inflate` ì˜ ì²« ë²ˆì§¸ ì¸ìë¡œ ë³´ì—¬ì¤„ ë ˆì´ì•„ì›ƒì¸ sub1, ë‘ ë²ˆì§¸ ì¸ìë¡œëŠ” sub1ì„ ë„£ì„ ë ˆì´ì•„ì›ƒì˜ ê°ì²´ë¥¼ ë„£ì–´ì¤¬ë‹¤. ì‹¤í–‰ì‹œì¼œë³´ë©´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í…ìŠ¤íŠ¸ê°€ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

![](https://images.velog.io/images/k906506/post/82168b57-31dd-46f4-8e3c-c40c8dad1faa/image.png)
